-- Fonction pour transférer des items entre les coffres
local function transferItems()
    local chests = {}
    
    -- Trouver tous les coffres connectés
    for _, name in ipairs(peripheral.getNames()) do
        if peripheral.getType(name) == "minecraft:chest" then
            table.insert(chests, name)
        end
    end
    
    -- S'assurer qu'il y a au moins 2 coffres pour transférer
    if #chests < 2 then
        print("Il faut au moins deux coffres pour transférer des items.")
        return
    end
    
    -- Transférer les items de chaque coffre vers le suivant
    for i = 1, #chests - 1 do
        local sourceChest = chests[i]
        local destChest = chests[i + 1]
        
        -- On récupère tous les items du coffre source
        local items = peripheral.call(sourceChest, "list")

        -- Transférer tous les items du coffre source vers le coffre de destination
        for slot, item in pairs(items) do
            print("Transfert de", item.count, "x", item.name, "de", sourceChest, "vers", destChest)
            peripheral.call(sourceChest, "pushItems", destChest, slot, item.count)
        end
    end

    print("Transfert terminé entre tous les coffres.")
end

-- Lancer la fonction de transfert
transferItems()
