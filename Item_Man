local monitor
local chest
local letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"

-- Trouver le monitor et le coffre
for _, name in ipairs(peripheral.getNames()) do
    local pType = peripheral.getType(name)
    if pType == "monitor" then
        monitor = peripheral.wrap(name)
    elseif pType == "minecraft:chest" then
        chest = peripheral.wrap(name)
    end
end

if not chest then
    print("Aucun coffre trouvé.")
    return
end

monitor.setTextScale(0.5)
monitor.setBackgroundColor(colors.black)
monitor.setTextColor(colors.white)

local function sortChest()
    -- Récupérer tous les items du coffre
    local items = chest.list()
    
    -- Créer une table pour stocker les objets triés par lettre
    local sortedItems = {}
    for _, item in pairs(items) do
        local firstLetter = item.name:sub(1, 1):upper()
        if not sortedItems[firstLetter] then
            sortedItems[firstLetter] = {}
        end
        table.insert(sortedItems[firstLetter], item)
    end
    
    -- Trier les clés de l'alphabet
    local sortedLetters = {}
    for letter in letters:gmatch(".") do
        if sortedItems[letter] then
            table.insert(sortedLetters, letter)
        end
    end
    
    -- Placer les items triés dans le coffre
    local slot = 1
    for _, letter in ipairs(sortedLetters) do
        for _, item in ipairs(sortedItems[letter]) do
            if slot <= 27 then -- Limiter le nombre de slots (27 max dans un coffre classique)
                chest.pushItems(slot, slot, item.count)  -- Déplacer l'objet dans le bon slot
                slot = slot + 1
            end
        end
    end
end

-- Boucle infinie pour trier les objets en continu
while true do
    sortChest()
    sleep(5)  -- Attendre 5 secondes avant de refaire le tri
end
