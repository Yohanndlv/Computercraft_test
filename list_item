-- Détection automatique du monitor et des coffres
local monitor
local chests = {}

for _, name in ipairs(peripheral.getNames()) do
    local pType = peripheral.getType(name)
    if pType == "monitor" then
        monitor = peripheral.wrap(name)
    elseif pType == "minecraft:chest" then
        table.insert(chests, peripheral.wrap(name))
    end
end

if not monitor then
    print("Aucun monitor trouvé !")
    return
end

-- Préparation de l'affichage
monitor.clear()
monitor.setCursorPos(1, 1)
monitor.setTextScale(0.5) -- plus petit texte si grand contenu

local line = 1
for i, chest in ipairs(chests) do
    monitor.setCursorPos(1, line)
    monitor.write("Coffre #" .. i)
    line = line + 1

    local items = chest.list()
    for slot, item in pairs(items) do
        monitor.setCursorPos(1, line)
        monitor.write("- " .. item.count .. "x " .. item.name)
        line = line + 1
    end

    line = line + 1 -- ligne vide entre les coffres
end
